# Moderate Startup. Checks items in offhand for an "eye of ender" that links to specific structure types, and displays if the structure is or is not found. Each use has a 20% chance to consume the offhand item.

# Startup, Tag Checking/Setting, Scoreboard Resets
execute as @s[tag=!RunicSpellStartup,tag=!RunicSearch] at @s run function rr_recast:spells/core/delay_moderate
tag @s add RunicSpellStarted
execute as @s[tag=RunicSpellStartup,scores={rr.spell.SpellStart=1..}] at @s run particle witch ~ ~1 ~ 0.25 0.25 0.25 0.02 1 force @a[distance=..50]
execute as @s[tag=RunicSpellStartup,scores={rr.spell.SpellStart=10..},tag=!RunicSilentSpells] at @s run playsound minecraft:entity.blaze.ambient master @a[distance=..40] ~ ~1 ~ 0.1 1.75
execute as @s[tag=RunicSpellStartup,scores={rr.spell.SpellStart=0}] at @s run tag @s add RunicSearch
execute as @s[tag=RunicSearch,scores={rr.spell.SpellStore=1..}] at @s run scoreboard players set @s rr.spell.SpellStore 0
execute as @s[tag=RunicSpellStartup,tag=RunicSearch] at @s run tag @s remove RunicSpellStartup


# Execution of the Spell
# No Structure Selected
execute as @s[tag=RunicSpellStartup,nbt=!{Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s run title @s actionbar {"text":"Casting: Search [ No Structure selected! ]","color":"white","bold":true}

# Ancient Crypt
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s run title @s actionbar {"text":"Casting: Search [ Ancient Crypt ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s run particle enchant ~ ~1 ~ 0 0.65 0 0.85 40 force @a[distance=..50]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,tag=!RunicSilentSpells] at @s run playsound minecraft:block.end_portal.spawn master @a[distance=..40] ~ ~ ~ 1.35 1.85 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,tag=!RunicSilentSpells] at @s run playsound minecraft:block.enchantment_table.use master @a[distance=..40] ~ ~ ~ 1 1.75 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s store result score @s rr.math.NumTrack1 run locate structure rr_recast:ancient_crypt
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not an ancient crypt anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if score @s rr.math.NumTrack1 matches 1000..2000 run tellraw @s [{"text":"You think the familiar feel of sculk energy lingers weakly near here... [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"You hear a low rumble beneath the earth... [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if score @s rr.math.NumTrack1 matches 250..499 run tellraw @s [{"text":"You feel uneasy, but don't know why. A slight nausea knocks you off-guard for a moment. And... what is that stench? [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if score @s rr.math.NumTrack1 matches 100..249 run tellraw @s [{"text":"Your mind begins to be bombarded by whispers of an unknown language, but stops just as soon as it started... An Ancient Crypt must be near this place. [Within 250 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if score @s rr.math.NumTrack1 matches 50..99 run tellraw @s [{"text":"The mysterious wispers overpower even the loudest of your own thoughts momentarily. Something very close calls to you. [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if score @s rr.math.NumTrack1 matches 0..49 run tellraw @s [{"text":"The warden flesh in your hand begins to warp and mold its tendrils madly. An Ancient Crypt silently rests very near. [Within 50 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:echo_shard",tag:{custom_model_data=12339}}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s echo_shard{custom_model_data=12339} 1

# Ancient City
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s run title @s actionbar {"text":"Casting: Search [ Ancient City ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s store result score @s rr.math.NumTrack1 run locate structure ancient_city
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not an ancient city anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s if score @s rr.math.NumTrack1 matches 1000..2000 run tellraw @s [{"text":"You think you may have heard a soft echo of sculk tendrils in a long-gone city... [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"You begin to feel anxious as the solemn lulls of a desolate citadel ring in your mind... [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s if score @s rr.math.NumTrack1 matches 101..499 run tellraw @s [{"text":"Your skin feels cold and your vision darkens ever so slightly for a moment... A sculk-infested ruin lies dormant near you. [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"As you take another step, you can't shake the feeling... something just reached for you. [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:sculk_catalyst"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s sculk_catalyst 1

# Pillager Outpost
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s run title @s actionbar {"text":"Casting: Search [ Pillager Outpost ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s store result score @s rr.math.NumTrack1 run locate structure pillager_outpost
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not a pillager outpost anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s if score @s rr.math.NumTrack1 matches 1000..2000 run tellraw @s [{"text":"You think there might have just been a horn sounding in the distance... [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"You feel like the sound of horns and cheers is drawing closer... [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s if score @s rr.math.NumTrack1 matches 101..499 run tellraw @s [{"text":"A trail of footprints rests in the ground below beside a broken crossbow. A Pillager Outpost must be around here somewhere. [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"The sound of war cries and crossbows firing nearby gives no room for guesswork. A Pillager Outpost is very near. [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:white_banner",tag:{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}}}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s white_banner{display:{Name:'{"color":"gold","translate":"block.minecraft.ominous_banner"}'}} 1

# Desert Pyramid
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s run title @s actionbar {"text":"Casting: Search [ Desert Pyramid ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s store result score @s rr.math.NumTrack1 run locate structure desert_pyramid
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not a desert pyramid anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s if score @s rr.math.NumTrack1 matches 1000..2000 run tellraw @s [{"text":"You feel like the air around you is guiding you toward a structure, but where...? [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"You see that there's a sandstone chunk in the ground below you with an engraving. It's a pyramid! [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s if score @s rr.math.NumTrack1 matches 101..499 run tellraw @s [{"text":"The sands near you seem to have been packed in from some civilization that was here long ago. Their pyramid must be nearby! [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"Shards of ancient pottery become only more prevalent as you continue to move around; a Desert Pyramid is surely close! [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:golden_apple"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s gold_ingot 1

# Woodland Mansion
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s run title @s actionbar {"text":"Casting: Search [ Woodland Mansion ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s store result score @s rr.math.NumTrack1 run locate structure mansion
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not a woodland mansion anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s if score @s rr.math.NumTrack1 matches 1000..2000 run tellraw @s [{"text":"You've heard rumors of a large mansion holding enemies of the Villagers about this place... [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"Your spell collides with an odd magic that hangs in the air. It seems as though an Evoker's magic haunts this land. [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s if score @s rr.math.NumTrack1 matches 101..499 run tellraw @s [{"text":"Drawing nearer to the location elicits a slight fear in you as you hear the eerie laughs of Vexes... [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"The Mansion is here. Every Pillager inside can sense your presence, and they don't like you. [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:emerald_block"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s emerald_block 1

# Piglin Bastion
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s run title @s actionbar {"text":"Casting: Search [ Piglin Bastion ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if entity @s[nbt={Dimension:"minecraft:the_nether"}] store result score @s rr.math.NumTrack1 run locate structure bastion_remnant
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s unless entity @s[nbt={Dimension:"minecraft:the_nether"}] store result score @s rr.math.NumTrack1 run scoreboard players set @s rr.math.NumTrack1 2500
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not a bastion anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if score @s rr.math.NumTrack1 matches 1500..2000 run tellraw @s [{"text":"You notice a tattered sheet of cloth with a Piglin's snout emblem on it... A Bastion could be somewhere. [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if score @s rr.math.NumTrack1 matches 1000..1499 run tellraw @s [{"text":"Your magic intertwines with the fiery Nether air. You get a feeling that the Piglins' ruined citadel is closer. [Within 1500 blocks]","color":"#B0A1F9","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"Your magic allows you to make out a tiny bit of Piglin inscriptions in a nearby stone... It tells of their capital. This is closer still. [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if score @s rr.math.NumTrack1 matches 250..499 run tellraw @s [{"text":"Piglins seem more innumerable and wary of your presence as you continue. [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if score @s rr.math.NumTrack1 matches 101..249 run tellraw @s [{"text":"You sense the empty pockets where the Piglins mined all the Netherite ores from. This is very close to a Bastion. [Within 250 blocks]","color":"#573FF2","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"You are practically at the front door to a war-torn empire of piglin marauders. Tread lightly. [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:gilded_blackstone"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s gilded_blackstone 1

# End City
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s run title @s actionbar {"text":"Casting: Search [ End City ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if entity @s[nbt={Dimension:"minecraft:the_end"}] store result score @s rr.math.NumTrack1 run locate structure end_city
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s unless entity @s[nbt={Dimension:"minecraft:the_end"}] store result score @s rr.math.NumTrack1 run scoreboard players set @s rr.math.NumTrack1 2500
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not an end city near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if score @s rr.math.NumTrack1 matches 1500..2000 run tellraw @s [{"text":"The Shulker's shell in your hand seems to twitch a bit, as though it's drawn to something. [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if score @s rr.math.NumTrack1 matches 1000..1499 run tellraw @s [{"text":"The dense haze blocking your view seems to have a slight purple tinge somewhere... Is it your imagination? [Within 1500 blocks]","color":"#B0A1F9","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"The air around you (what little there is) seems to grow lighter. [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if score @s rr.math.NumTrack1 matches 250..499 run tellraw @s [{"text":"What once was a splotch of blurry purple light has grown into a larger, less vague shape. An end city is nearby. [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if score @s rr.math.NumTrack1 matches 101..249 run tellraw @s [{"text":"The Shulker's shell in your had vibrates and twists as you draw nearer to a place that the Shulker calls home. [Within 250 blocks]","color":"#573FF2","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"Your vision clears and you can finally see a gravity-defying mass of endstone and purpur blocks guarded by armored alien creatures. [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:shulker_shell"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s shulker_shell 1

# Trail Ruins
execute as @s[tag=RunicSpellStartup,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s run title @s actionbar {"text":"Casting: Search [ Trail Ruins ]","color":"white","bold":true}
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s store result score @s rr.math.NumTrack1 run locate structure trail_ruins
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s unless score @s rr.math.NumTrack1 matches ..2000 run tellraw @s [{"text":"You get the feeling that there is not a trail ruins anywhere near this place.","color":"white","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s if score @s rr.math.NumTrack1 matches 1000..2000 run tellraw @s [{"text":"You think that a small stone nearby has a marking that looks faintly like a footprint... [Within 2000 blocks]","color":"#C7BBFA","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s if score @s rr.math.NumTrack1 matches 500..999 run tellraw @s [{"text":"You notice a piece of pottery is poking out of the ground below you. An ancient tribe must have settled somewhere around here. [Within 1000 blocks]","color":"#9B89F8","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s if score @s rr.math.NumTrack1 matches 101..499 run tellraw @s [{"text":"The earth below you seems to hold many small items and packed mud. The long-gone tribe surely lived closer to here. [Within 500 blocks]","color":"#5D46F5","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s if score @s rr.math.NumTrack1 matches 0..99 run tellraw @s [{"text":"The ground feels different as you continue on. You get the feeling that a trail ruins is very near! [Within 100 blocks]","color":"#3B20F0","italic":false}]
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s positioned ~ ~400 ~ run loot spawn ~ ~ ~ loot rr_recast:generic/search_remove
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run playsound minecraft:block.sculk_catalyst.break player @a[distance=..50] ~ ~ ~ 1 1 0
execute as @s[tag=RunicSearch,tag=RunicSpellRun,nbt={Inventory:[{Slot:-106b,id:"minecraft:mud_bricks"}]}] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run clear @s mud_bricks 1

execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s if entity @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}] run kill @e[type=item,nbt={Item:{id:"minecraft:ender_eye",tag:{RemoveSearchItem:1b}}}]

execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s run scoreboard players add @s rr.system.Timer 20
execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s run scoreboard players remove @s rr.spell.MemTCD 20
execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s run tag @s remove RunicSpellStarted
execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s run tag @s remove RunicCasting
execute as @s[tag=RunicSearch,tag=RunicSpellRun] at @s run tag @s remove RunicSpellRun
execute as @s[tag=RunicSearch,tag=!RunicSpellRun,scores={rr.spell.SpellStart=0}] at @s run tag @s remove RunicSearch
scoreboard players set @s[tag=!RunicSearch,tag=!RunicSpellRun,scores={rr.spell.SpellStart=0}] rr.spell.SpellID 0